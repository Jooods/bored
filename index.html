<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strike Zone - FPS Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: #000;
            font-family: 'Courier New', monospace;
        }

        #gameCanvas {
            display: block;
            cursor: crosshair;
        }

        .hud {
            position: absolute;
            color: #0f0;
            text-shadow: 0 0 10px #0f0;
            font-weight: bold;
        }

        .health {
            top: 20px;
            left: 20px;
            font-size: 24px;
        }

        .ammo {
            bottom: 40px;
            right: 20px;
            font-size: 28px;
        }

        .score {
            top: 20px;
            right: 20px;
            font-size: 20px;
        }

        .crosshair {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            pointer-events: none;
        }

        .crosshair::before,
        .crosshair::after {
            content: '';
            position: absolute;
            background: #0f0;
            box-shadow: 0 0 5px #0f0;
        }

        .crosshair::before {
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            transform: translateY(-50%);
        }

        .crosshair::after {
            left: 50%;
            top: 0;
            height: 100%;
            width: 2px;
            transform: translateX(-50%);
        }

        .menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #0f0;
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border: 2px solid #0f0;
            box-shadow: 0 0 20px #0f0;
        }

        .menu h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #0f0;
        }

        .menu button {
            background: transparent;
            border: 2px solid #0f0;
            color: #0f0;
            padding: 15px 40px;
            font-size: 20px;
            cursor: pointer;
            margin: 10px;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .menu button:hover {
            background: #0f0;
            color: #000;
            box-shadow: 0 0 20px #0f0;
        }

        .gameOver {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #f00;
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border: 2px solid #f00;
            box-shadow: 0 0 20px #f00;
        }

        .gameOver h2 {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .instruction {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(0, 255, 0, 0.6);
            font-size: 14px;
            text-align: center;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="menu" class="menu">
        <h1>STRIKE ZONE</h1>
        <p style="margin-bottom: 20px;">Tactical FPS Combat</p>
        <button onclick="startGame()">START MISSION</button>
        <p style="margin-top: 30px; font-size: 14px;">
            WASD - Move | Mouse - Aim<br>
            Left Click - Shoot | R - Reload
        </p>
    </div>

    <div id="gameOver" class="gameOver">
        <h2>MISSION FAILED</h2>
        <p id="finalScore" style="font-size: 24px; margin: 20px 0;"></p>
        <button onclick="location.reload()" style="border-color: #f00; color: #f00;">RETRY MISSION</button>
    </div>

    <div class="crosshair hidden" id="crosshair"></div>
    
    <div class="hud health hidden" id="health">HP: 100</div>
    <div class="hud ammo hidden" id="ammo">30 / 90</div>
    <div class="hud score hidden" id="score">KILLS: 0</div>
    <div class="instruction hidden" id="instruction">
        Eliminate all hostile targets | Headshots deal 2x damage
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let w = canvas.width = window.innerWidth;
        let h = canvas.height = window.innerHeight;

        // Game state
        let gameActive = false;
        let player = {
            x: w / 2,
            y: h - 100,
            health: 100,
            ammo: 30,
            reserve: 90,
            maxAmmo: 30,
            kills: 0,
            reloading: false
        };

        let enemies = [];
        let bullets = [];
        let particles = [];
        let lastSpawn = 0;
        let spawnRate = 2000;
        let mouseX = w / 2;
        let mouseY = h / 2;
        let shooting = false;
        let lastShot = 0;
        let fireRate = 150;

        // Keys
        const keys = {};

        class Enemy {
            constructor() {
                this.w = 40 + Math.random() * 20;
                this.h = 80 + Math.random() * 40;
                this.x = Math.random() * (w - this.w);
                this.y = -this.h;
                this.speed = 0.5 + Math.random() * 1.5;
                this.health = 2;
                this.color = `hsl(${Math.random() * 60}, 70%, 50%)`;
                this.shootTimer = 0;
                this.shootCooldown = 2000 + Math.random() * 2000;
                this.headY = this.y + this.h * 0.2;
            }

            update() {
                this.y += this.speed;
                this.headY = this.y + this.h * 0.2;

                // Shoot at player
                this.shootTimer += 16;
                if (this.shootTimer >= this.shootCooldown && this.y > 50) {
                    this.shoot();
                    this.shootTimer = 0;
                }

                return this.y < h + 50;
            }

            shoot() {
                bullets.push({
                    x: this.x + this.w / 2,
                    y: this.y + this.h / 2,
                    dx: (player.x - (this.x + this.w / 2)) * 0.003,
                    dy: (player.y - (this.y + this.h / 2)) * 0.003,
                    enemy: true,
                    size: 4
                });
            }

            draw() {
                ctx.save();
                
                // Body
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y + this.h * 0.3, this.w, this.h * 0.7);
                
                // Head
                ctx.fillStyle = '#d4a574';
                ctx.beginPath();
                ctx.arc(this.x + this.w / 2, this.headY, this.w * 0.4, 0, Math.PI * 2);
                ctx.fill();
                
                // Weapon
                ctx.fillStyle = '#333';
                ctx.fillRect(this.x + this.w * 0.7, this.y + this.h * 0.5, this.w * 0.3, 4);
                
                // Health bar
                ctx.fillStyle = '#f00';
                ctx.fillRect(this.x, this.y - 10, this.w, 4);
                ctx.fillStyle = '#0f0';
                ctx.fillRect(this.x, this.y - 10, this.w * (this.health / 2), 4);
                
                ctx.restore();
            }

            hit(headshot = false) {
                this.health -= headshot ? 2 : 1;
                return this.health <= 0;
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 5;
                this.vy = (Math.random() - 0.5) * 5 - 2;
                this.life = 1;
                this.color = color;
                this.size = Math.random() * 3 + 2;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.2;
                this.life -= 0.02;
                return this.life > 0;
            }

            draw() {
                ctx.fillStyle = `${this.color}${Math.floor(this.life * 255).toString(16).padStart(2, '0')}`;
                ctx.fillRect(this.x, this.y, this.size, this.size);
            }
        }

        function spawnEnemy() {
            enemies.push(new Enemy());
        }

        function shoot() {
            if (!gameActive || player.reloading || player.ammo <= 0) return;
            
            const now = Date.now();
            if (now - lastShot < fireRate) return;
            
            lastShot = now;
            player.ammo--;
            updateHUD();

            // Muzzle flash
            for (let i = 0; i < 10; i++) {
                particles.push(new Particle(mouseX, mouseY, '#ff0'));
            }

            // Bullet
            const angle = Math.atan2(mouseY - player.y, mouseX - player.x);
            bullets.push({
                x: player.x,
                y: player.y,
                dx: Math.cos(angle) * 8,
                dy: Math.sin(angle) * 8,
                enemy: false,
                size: 3
            });
        }

        function reload() {
            if (player.reloading || player.ammo === player.maxAmmo || player.reserve === 0) return;
            
            player.reloading = true;
            document.getElementById('ammo').style.color = '#ff0';
            
            setTimeout(() => {
                const needed = player.maxAmmo - player.ammo;
                const toReload = Math.min(needed, player.reserve);
                player.ammo += toReload;
                player.reserve -= toReload;
                player.reloading = false;
                document.getElementById('ammo').style.color = '#0f0';
                updateHUD();
            }, 1500);
        }

        function updateHUD() {
            document.getElementById('health').textContent = `HP: ${player.health}`;
            document.getElementById('ammo').textContent = `${player.ammo} / ${player.reserve}`;
            document.getElementById('score').textContent = `KILLS: ${player.kills}`;
            
            const healthEl = document.getElementById('health');
            if (player.health <= 30) {
                healthEl.style.color = '#f00';
            } else if (player.health <= 60) {
                healthEl.style.color = '#ff0';
            } else {
                healthEl.style.color = '#0f0';
            }
        }

        function gameLoop(timestamp) {
            if (!gameActive) return;

            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, w, h);

            // Sky gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, h / 2);
            gradient.addColorStop(0, '#001a33');
            gradient.addColorStop(1, '#003366');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, w, h / 2);

            // Ground
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, h / 2, w, h / 2);

            // Grid lines (ground)
            ctx.strokeStyle = 'rgba(0, 255, 0, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 20; i++) {
                const y = h / 2 + (i * 30);
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(w, y);
                ctx.stroke();
            }

            // Spawn enemies
            if (timestamp - lastSpawn > spawnRate) {
                spawnEnemy();
                lastSpawn = timestamp;
                spawnRate = Math.max(800, spawnRate - 50);
            }

            // Update and draw enemies
            for (let i = enemies.length - 1; i >= 0; i--) {
                const enemy = enemies[i];
                if (!enemy.update()) {
                    enemies.splice(i, 1);
                    continue;
                }
                enemy.draw();
            }

            // Update and draw bullets
            for (let i = bullets.length - 1; i >= 0; i--) {
                const bullet = bullets[i];
                bullet.x += bullet.dx;
                bullet.y += bullet.dy;

                // Check collisions
                if (!bullet.enemy) {
                    // Player bullet
                    for (let j = enemies.length - 1; j >= 0; j--) {
                        const enemy = enemies[j];
                        const isHeadshot = bullet.x > enemy.x && 
                                         bullet.x < enemy.x + enemy.w &&
                                         bullet.y > enemy.headY - enemy.w * 0.4 &&
                                         bullet.y < enemy.headY + enemy.w * 0.4;
                        
                        const isBodyshot = !isHeadshot && 
                                         bullet.x > enemy.x && 
                                         bullet.x < enemy.x + enemy.w &&
                                         bullet.y > enemy.y &&
                                         bullet.y < enemy.y + enemy.h;

                        if (isHeadshot || isBodyshot) {
                            if (enemy.hit(isHeadshot)) {
                                player.kills++;
                                updateHUD();
                                enemies.splice(j, 1);
                                
                                // Death particles
                                for (let k = 0; k < 30; k++) {
                                    particles.push(new Particle(
                                        enemy.x + enemy.w / 2,
                                        enemy.y + enemy.h / 2,
                                        isHeadshot ? '#f00' : '#ff0'
                                    ));
                                }
                            } else {
                                // Hit particles
                                for (let k = 0; k < 10; k++) {
                                    particles.push(new Particle(bullet.x, bullet.y, '#f00'));
                                }
                            }
                            bullets.splice(i, 1);
                            break;
                        }
                    }
                } else {
                    // Enemy bullet
                    const dist = Math.sqrt(
                        Math.pow(bullet.x - player.x, 2) + 
                        Math.pow(bullet.y - player.y, 2)
                    );
                    if (dist < 30) {
                        player.health -= 10;
                        updateHUD();
                        bullets.splice(i, 1);
                        
                        if (player.health <= 0) {
                            endGame();
                        }
                        
                        for (let k = 0; k < 15; k++) {
                            particles.push(new Particle(bullet.x, bullet.y, '#f00'));
                        }
                        continue;
                    }
                }

                // Remove off-screen bullets
                if (bullet.x < 0 || bullet.x > w || bullet.y < 0 || bullet.y > h) {
                    bullets.splice(i, 1);
                    continue;
                }

                // Draw bullet
                ctx.fillStyle = bullet.enemy ? '#f00' : '#0ff';
                ctx.shadowBlur = 10;
                ctx.shadowColor = bullet.enemy ? '#f00' : '#0ff';
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, bullet.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            }

            // Update and draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                if (!particles[i].update()) {
                    particles.splice(i, 1);
                } else {
                    particles[i].draw();
                }
            }

            requestAnimationFrame(gameLoop);
        }

        function startGame() {
            document.getElementById('menu').classList.add('hidden');
            document.getElementById('crosshair').classList.remove('hidden');
            document.getElementById('health').classList.remove('hidden');
            document.getElementById('ammo').classList.remove('hidden');
            document.getElementById('score').classList.remove('hidden');
            document.getElementById('instruction').classList.remove('hidden');
            
            gameActive = true;
            player.health = 100;
            player.ammo = 30;
            player.reserve = 90;
            player.kills = 0;
            enemies = [];
            bullets = [];
            particles = [];
            lastSpawn = 0;
            spawnRate = 2000;
            
            updateHUD();
            requestAnimationFrame(gameLoop);
        }

        function endGame() {
            gameActive = false;
            document.getElementById('finalScore').textContent = `Total Kills: ${player.kills}`;
            document.getElementById('gameOver').style.display = 'block';
        }

        // Event listeners
        window.addEventListener('resize', () => {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        });

        canvas.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        canvas.addEventListener('mousedown', () => {
            shooting = true;
            shoot();
        });

        canvas.addEventListener('mouseup', () => {
            shooting = false;
        });

        window.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
            if (e.key.toLowerCase() === 'r') {
                reload();
            }
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });

        // Auto-fire when holding mouse
        setInterval(() => {
            if (shooting && gameActive) {
                shoot();
            }
        }, fireRate);
    </script>
</body>
</html>
